å¤ªæ£’äº† ğŸ‘ï¼
é‚£ä½ ç°åœ¨çš„è¿›åº¦æ˜¯ â€”â€” **â€œç¬¬ 1 é˜¶æ®µï¼šé¡¹ç›®æ­å»º + è·¯ç”±é…ç½®å®Œæˆï¼Œå‡†å¤‡è¿æ¥ Firebaseâ€**ã€‚

æˆ‘æ¥å¸®ä½ æŠŠæ¨¡æ¿è°ƒæ•´æˆã€Œä½ å½“å‰çœŸå®è¿›åº¦ç‰ˆã€ï¼š
ğŸ‘‰ åªä¿ç•™ä½ å·²ç»å®Œæˆçš„éƒ¨åˆ†ï¼ˆé¡¹ç›® + è·¯ç”±ï¼‰
ğŸ‘‰ æ¥ä¸‹æ¥éƒ¨åˆ†ï¼ˆFirebase è¿æ¥ï¼‰å…ˆåˆ—ä¸º**ä¸‹ä¸€ç›®æ ‡ + æŒ‡å¯¼è¯´æ˜**
ğŸ‘‰ å¹¶é™„å¸¦**è®²è§£ + å¸¸è§ç–‘é—®**ï¼Œæ–¹ä¾¿ä½ è¾¹å­¦è¾¹çœ‹ã€‚

---

# ğŸ“˜ Firebase è®°äº‹æœ¬ï¼ˆNote Appï¼‰å­¦ä¹ è¿›åº¦è®°å½•ï¼ˆæ–°æ‰‹æ•™å­¦ç‰ˆï¼‰

---

## ğŸ¯ å½“å‰è¿›åº¦

âœ… **é˜¶æ®µï¼šç¬¬ 1 é˜¶æ®µï¼ˆå·²å®Œæˆè·¯ç”±é…ç½®ï¼‰**
â­ï¸ **ä¸‹ä¸€ç›®æ ‡ï¼šè¿æ¥ Firebaseï¼Œè®©é¡¹ç›®èƒ½è¯»å–æ•°æ®åº“**

---

## ğŸ§­ å­¦ä¹ é˜¶æ®µè§„åˆ’

|   é˜¶æ®µ    | å†…å®¹                | å­¦ä¹ é‡ç‚¹                        |
| :-------: | :------------------ | :------------------------------ |
| ç¬¬ 1 é˜¶æ®µ | é¡¹ç›®æ­å»º + è·¯ç”±é…ç½® | äº†è§£ Angular é¡¹ç›®ç»“æ„ä¸é¡µé¢åˆ‡æ¢ |
| ç¬¬ 2 é˜¶æ®µ | Firebase è¿æ¥       | å­¦ä¼šé…ç½® Firebase å¹¶æµ‹è¯•è¿é€šæ€§  |
| ç¬¬ 3 é˜¶æ®µ | ç™»å½• / æ³¨å†Œ         | ä½¿ç”¨ Firebase Auth å®ç°ç™»å½•æ³¨å†Œ |
| ç¬¬ 4 é˜¶æ®µ | ç¬”è®° CRUD           | Firestore å¢åˆ æ”¹æŸ¥              |
| ç¬¬ 5 é˜¶æ®µ | ä¼˜åŒ–ä¸æ‰©å±•          | æœç´¢ã€æ’åºã€ç¾åŒ– UI             |

---

## ğŸ§© å·²å®Œæˆå†…å®¹

### âœ… é¡¹ç›®åˆ›å»º

ä½ å·²æˆåŠŸç”¨å‘½ä»¤åˆ›å»º Angular é¡¹ç›®ï¼š

```bash
ng new note-app
cd note-app
```

> ğŸ’¡ æç¤ºï¼š
> `ng new` å‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºå®Œæ•´ç»“æ„ï¼ˆç»„ä»¶ã€ç¯å¢ƒæ–‡ä»¶ã€æ ·å¼æ–‡ä»¶ç­‰ï¼‰ã€‚

---

### âœ… è·¯ç”±æ¨¡å—é…ç½®

**ç›®æ ‡ï¼š** è®©ä¸åŒé¡µé¢å¯ä»¥åˆ‡æ¢æ˜¾ç¤ºã€‚

#### ğŸ“„ app-routing.module.ts ç¤ºä¾‹

```typescript
import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';
import { HomeComponent } from './pages/home/home.component';
import { LoginComponent } from './pages/login/login.component';
import { RegisterComponent } from './pages/register/register.component';
import { NotesListComponent } from './pages/notes-list/notes-list.component';
import { NoteEditComponent } from './pages/note-edit/note-edit.component';

const routes: Routes = [
  { path: '', component: HomeComponent },
  { path: 'login', component: LoginComponent },
  { path: 'register', component: RegisterComponent },
  { path: 'notes', component: NotesListComponent },
  { path: 'notes/:id', component: NoteEditComponent },
];

@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})
export class AppRoutingModule {}
```

> ğŸ’¡**è®²è§£ï¼š**
>
> * `RouterModule.forRoot(routes)`ï¼šæ³¨å†Œæ‰€æœ‰é¡µé¢è·¯å¾„ã€‚
> * `path:''`ï¼šè¡¨ç¤ºé¦–é¡µã€‚
> * `path:'notes/:id'`ï¼šä»£è¡¨åŠ¨æ€è·¯ç”±ï¼ˆç¼–è¾‘æŸæ¡ç¬”è®°ï¼‰ã€‚
> * æ¯ä¸ªé¡µé¢éƒ½éœ€è¦åœ¨ `pages/` ä¸‹æœ‰å¯¹åº”ç»„ä»¶ã€‚

---

### âœ… é¡µé¢çº§ç»„ä»¶ï¼ˆPagesï¼‰å·²å»ºç«‹

ä½ çš„ç›®å½•å¤§è‡´å¦‚ä¸‹ï¼š

```
src/app/
  â”œâ”€â”€ pages/
  â”‚   â”œâ”€â”€ home/
  â”‚   â”œâ”€â”€ login/
  â”‚   â”œâ”€â”€ register/
  â”‚   â”œâ”€â”€ notes-list/
  â”‚   â””â”€â”€ note-edit/
  â”œâ”€â”€ app-routing.module.ts
  â””â”€â”€ app.component.ts
```

> âœ… æ‰“å¼€ `<router-outlet>` æµ‹è¯•æ—¶ï¼Œèƒ½æ­£ç¡®åˆ‡æ¢é¡µé¢ã€‚

---

## âš¡ ä¸‹ä¸€æ­¥ç›®æ ‡ï¼šè¿æ¥ Firebase

ä½ æ¥ä¸‹æ¥è¦åšçš„ï¼Œæ˜¯è®©è¿™ä¸ªå‰ç«¯é¡¹ç›®çœŸæ­£è¿ä¸Š Firebaseã€‚
è¿™éƒ¨åˆ†åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µå®ŒæˆğŸ‘‡

### ğŸ”¹ ç¬¬ä¸€æ­¥ï¼šå»ºç«‹ Firebase é¡¹ç›®

1. ç™»å½• [https://console.firebase.google.com](https://console.firebase.google.com)
2. ç‚¹å‡» â€œæ·»åŠ é¡¹ç›®â€ â†’ è¾“å…¥åç§°ï¼ˆä¾‹ï¼š`note-app`ï¼‰
3. å¯ç”¨ï¼š

   * Firestore Databaseï¼ˆæ•°æ®åº“ï¼‰
   * Authenticationï¼ˆç™»å½•æ³¨å†Œï¼‰

---

### ğŸ”¹ ç¬¬äºŒæ­¥ï¼šåœ¨ Angular ä¸­å®‰è£… Firebase æ”¯æŒ

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
ng add @angular/fire
```

> ğŸ’¡è¯´æ˜ï¼š
> è¿™ä¸ªå‘½ä»¤ä¼šå¸®ä½ ï¼š
>
> * å®‰è£… Firebase SDK
> * è‡ªåŠ¨æ›´æ–° `environment.ts`
> * æç¤ºä½ æ˜¯å¦å¯ç”¨ Firestore / Authï¼ˆå…¨éƒ¨é€‰ YESï¼‰

---

### ğŸ”¹ ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒæ–‡ä»¶ï¼ˆenvironment.tsï¼‰

åœ¨ `src/environments/environment.ts` ä¸­ï¼Œå¡«å…¥ Firebase æ§åˆ¶å°çš„é…ç½®ä¿¡æ¯ï¼ˆä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š

```typescript
export const environment = {
  production: false,
  firebase: {
    apiKey: "ä½ çš„key",
    authDomain: "ä½ çš„domain",
    projectId: "ä½ çš„projectId",
    storageBucket: "xxx.appspot.com",
    messagingSenderId: "xxxx",
    appId: "xxxx"
  }
};
```

> âœ… åˆ°è¿™ä¸€æ­¥ï¼Œä½ çš„é¡¹ç›®å°±èƒ½è¯†åˆ« Firebase é¡¹ç›®äº†ã€‚
> ğŸ”œ ä¸‹ä¸€æ¬¡æˆ‘ä»¬ä¼šå†™æµ‹è¯•ä»£ç éªŒè¯è¿æ¥ã€‚

---

## ğŸ§° å¸¸è§ç–‘é—®åŒº

| é—®é¢˜                                | è§£é‡Š                                                           |
| :---------------------------------- | :------------------------------------------------------------- |
| â€œæˆ‘éœ€è¦å…ˆå†™æ•°æ®åº“å—ï¼Ÿâ€              | ä¸éœ€è¦ï¼ŒFirebase æ˜¯äº‘ç«¯æ•°æ®åº“ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆï¼ˆCollectionï¼‰ã€‚  |
| â€œFirebase æ˜¯å…è´¹çš„å—ï¼Ÿâ€             | æ˜¯ï¼ŒFirebase æä¾›å…è´¹å±‚ï¼Œè¶³å¤Ÿç»ƒä¹ é¡¹ç›®ä½¿ç”¨ã€‚                    |
| â€œng add @angular/fireâ€ å®‰è£…æ—¶å¡ä½ï¼Ÿ | æ£€æŸ¥ç½‘ç»œä»£ç†æˆ–ç”¨ `npm install @angular/fire firebase` æ‰‹åŠ¨è£…ã€‚ |

---

## ğŸ§­ ä¸‹ä¸€æ¬¡å­¦ä¹ è®¡åˆ’ï¼ˆç¬¬ 1 é˜¶æ®µä¸‹åŠéƒ¨åˆ†ï¼‰

ç›®æ ‡ï¼šè®©é¡¹ç›®æˆåŠŸè¿æ¥ Firebaseï¼Œå¹¶åœ¨æ§åˆ¶å°çœ‹åˆ°æµ‹è¯•è¾“å‡ºã€‚

**ä¸‹ä¸€æ¬¡ä½ å°†å®Œæˆï¼š**

1. åˆå§‹åŒ– Firebase æ¨¡å—ï¼ˆ`app.module.ts`ï¼‰
2. åœ¨æ§åˆ¶å°æµ‹è¯• Firestore æ˜¯å¦è¿é€š
3. çœ‹åˆ° â€œâœ… Firestore connectedâ€ æ—¥å¿—

---

## ğŸª„ ä¸‹æ¬¡å‘¼å«æ–¹æ³•

ä¸‹æ¬¡åªè¦è¾“å…¥ï¼š

> â€œç»§ç»­ä¸Šæ¬¡çš„ Firebase è®°äº‹æœ¬é¡¹ç›®æ•™å­¦ï¼Œä»è·¯ç”±ä¹‹åå¼€å§‹ã€‚â€
> â€œæˆ‘è¦å¼€å§‹è¿æ¥ Firebase é˜¶æ®µã€‚â€

---

æ˜¯å¦å¸Œæœ›æˆ‘ç°åœ¨å¸®ä½ æŠŠâ€œä¸‹ä¸€é˜¶æ®µï¼šFirebase è¿æ¥æµ‹è¯•â€é‚£ä¸€é¡µä¹Ÿè¡¥ä¸Šï¼ˆåŒ…å«è§£é‡Š + éªŒè¯ä»£ç ï¼‰ï¼Ÿ
é‚£æ ·ä½ ä¸‹æ¬¡å°±å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´åšå®éªŒã€‚


DAY02
1


å¤ªæ£’äº† ğŸ‰ï¼
ä½ ç°åœ¨æ­£å¼è¿›å…¥ â€”â€” **ğŸ“ç¬¬ 2 é˜¶æ®µï¼šFirebase è¿æ¥é˜¶æ®µ**ã€‚
è¿™ä¸ªé˜¶æ®µçš„ç›®æ ‡æ˜¯ **è®©ä½ çš„ Angular é¡¹ç›®èƒ½æˆåŠŸè¿ä¸Š Firebaseï¼Œå¹¶åœ¨æ§åˆ¶å°è¾“å‡ºæµ‹è¯•ç»“æœ**ã€‚
ä¸‹é¢æˆ‘ä¼šä¸€æ­¥ä¸€æ­¥æ•™ä½ é…ç½®ä¸éªŒè¯ğŸ‘‡

---

# ğŸš€ ç¬¬ 2 é˜¶æ®µï¼šFirebase è¿æ¥æ•™å­¦ï¼ˆå®Œæ•´æŒ‡å¯¼ç‰ˆï¼‰

---

## ğŸ¯ é˜¶æ®µç›®æ ‡

âœ… è®© Angular é¡¹ç›®ä¸ Firebase å»ºç«‹è¿æ¥
âœ… åˆå§‹åŒ– Firestoreã€Auth æ¨¡å—
âœ… åœ¨æ§åˆ¶å°æ‰“å° â€œâœ… Firebase connected successfully!â€

---

## ğŸ§© ç¬¬ 1 æ­¥ï¼šå®‰è£… Firebase å¥—ä»¶

åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆé¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼‰ï¼š

```bash
ng add @angular/fire
```

> ğŸ’¡å¦‚æœå®‰è£…æ—¶å¡ä½ï¼Œå¯ä»¥æ”¹ç”¨ï¼š
>
> ```bash
> npm install firebase @angular/fire
> ```
>
> ç„¶ååœ¨é¡¹ç›®é‡Œæ‰‹åŠ¨å¯¼å…¥æ¨¡å—ï¼ˆä¸‹é¢ä¼šæ•™ï¼‰ã€‚

---

## ğŸ§© ç¬¬ 2 æ­¥ï¼šåœ¨ Firebase æ§åˆ¶å°åˆ›å»ºé¡¹ç›®

1. æ‰“å¼€ [Firebase æ§åˆ¶å°](https://console.firebase.google.com)
2. ç‚¹å‡»ã€Œæ·»åŠ é¡¹ç›®ã€ â†’ è¾“å…¥åç§°ï¼ˆä¾‹ï¼š`note-app`ï¼‰
3. åˆ›å»ºåè¿›å…¥é¡¹ç›®é¦–é¡µï¼Œç‚¹å‡»ã€ŒWeb åº”ç”¨ã€å›¾æ ‡ï¼ˆ`</>`ï¼‰
4. è¾“å…¥ app åç§°ï¼ˆä¾‹å¦‚ï¼š`note-web`ï¼‰ï¼Œç„¶åç‚¹å‡»ã€Œæ³¨å†Œåº”ç”¨ã€
5. ç³»ç»Ÿä¼šç»™ä½ ä¸€æ®µé…ç½®ä»£ç ï¼Œé•¿è¿™æ ·ï¼š

```js
const firebaseConfig = {
  apiKey: "AIzaSyA...",
  authDomain: "note-app.firebaseapp.com",
  projectId: "note-app",
  storageBucket: "note-app.appspot.com",
  messagingSenderId: "1234567890",
  appId: "1:1234567890:web:abcd1234"
};
```

---

## ğŸ§© ç¬¬ 3 æ­¥ï¼šæŠŠé…ç½®å†™è¿›ç¯å¢ƒæ–‡ä»¶

åœ¨ `src/environments/environment.ts` ä¸­åŠ å…¥ï¼š

```typescript
export const environment = {
  production: false,
  firebase: {
    apiKey: "ä½ çš„key",
    authDomain: "ä½ çš„domain",
    projectId: "ä½ çš„projectId",
    storageBucket: "ä½ çš„storageBucket",
    messagingSenderId: "ä½ çš„messagingSenderId",
    appId: "ä½ çš„appId"
  }
};
```

> âœ… æ³¨æ„ï¼š`environment.ts` åªå½±å“å¼€å‘ç¯å¢ƒï¼Œéƒ¨ç½²ä¸Šçº¿æ—¶è¦æ”¹ `environment.prod.ts`ã€‚

---

## ğŸ§© ç¬¬ 4 æ­¥ï¼šåˆå§‹åŒ– Firebase æ¨¡å—

### æ‰“å¼€ `src/app/app.module.ts`

æŠŠå†…å®¹æ”¹æˆå¦‚ä¸‹ï¼ˆAngular 16+ å†™æ³•ï¼‰ğŸ‘‡

```typescript
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppRoutingModule } from './app-routing.module';
import { AppComponent } from './app.component';

import { provideFirebaseApp, initializeApp } from '@angular/fire/app';
import { provideFirestore, getFirestore } from '@angular/fire/firestore';
import { provideAuth, getAuth } from '@angular/fire/auth';
import { environment } from '../environments/environment';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyA9yxdPAi8r6aB0hDXbaze9aGlUsppAOfc",
  authDomain: "note-app-a43bc.firebaseapp.com",
  projectId: "note-app-a43bc",
  storageBucket: "note-app-a43bc.firebasestorage.app",
  messagingSenderId: "208128840633",
  appId: "1:208128840633:web:79007045374b0710051c68"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
    AppRoutingModule,

    // âœ… åˆå§‹åŒ– Firebase
    provideFirebaseApp(() => initializeApp(environment.firebase)),

    // âœ… åˆå§‹åŒ– Firestore & Auth
    provideFirestore(() => getFirestore()),
    provideAuth(() => getAuth()),
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
```

---

## ğŸ§© ç¬¬ 5 æ­¥ï¼šæµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ

æ‰“å¼€ `app.component.ts`ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ğŸ‘‡

`import { Component } from '@angular/core';
import { AngularFirestore } from '@angular/fire/firestore';

@Component({
  selector: 'app-root',
  template: `
    <h2>Firebase Connection Test (Angular 9)</h2>
    <p>è¯·æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹è¿æ¥çŠ¶æ€ã€‚</p>
  `
})
export class AppComponent {
  constructor(private firestore: AngularFirestore) {
    if (this.firestore) {
      console.log("âœ… Firebase connected successfully!");
    } else {
      console.error("âŒ Firebase connection failed!");
    }
  }
}

```

---

## ğŸ§© ç¬¬ 6 æ­¥ï¼šå¯åŠ¨é¡¹ç›®éªŒè¯

æ‰§è¡Œå‘½ä»¤ï¼š

```bash
ng serve
```

ç„¶åæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12 â†’ Consoleï¼‰ã€‚
ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š

```
âœ… Firebase connected successfully!
```

ğŸ‰ è¿™è¡¨ç¤ºé¡¹ç›®å·²æˆåŠŸè¿æ¥ Firebaseï¼

---

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜                                                       | è§£å†³åŠæ³•                                                              |
| :--------------------------------------------------------- | :-------------------------------------------------------------------- |
| âŒ â€œFirebase: No Firebase App '[DEFAULT]' has been createdâ€ | ç¡®è®¤åœ¨ `app.module.ts` é‡Œè°ƒç”¨äº† `initializeApp(environment.firebase)` |
| âŒ â€œPermission deniedâ€                                      | Firestore æ•°æ®åº“è§„åˆ™æœªå¼€æ”¾ï¼Œå…ˆåœ¨æ§åˆ¶å°æ”¹ä¸ºã€Œæµ‹è¯•æ¨¡å¼ã€å¯åŠ¨            |
| ğŸ•’ å®‰è£… `@angular/fire` å¡ä½                                | ä½¿ç”¨ npm æ‰‹åŠ¨å®‰è£…ï¼š`npm install firebase @angular/fire`               |
| ğŸ”¥ æ§åˆ¶å°æ²¡è¾“å‡º                                             | æ£€æŸ¥ `app.component.ts` æ˜¯å¦åœ¨ `bootstrap` ä¸­åŠ è½½ï¼ˆé»˜è®¤æ˜¯ï¼‰           |

---

## âœ… é˜¶æ®µæ€»ç»“

| é¡¹ç›®              | çŠ¶æ€ |
| :---------------- | :--- |
| Angular é¡¹ç›®æ­å»º  | âœ…    |
| è·¯ç”±é…ç½®          | âœ…    |
| Firebase è¿æ¥æˆåŠŸ | âœ…    |
| Firestore åˆå§‹åŒ–  | âœ…    |
| Auth åˆå§‹åŒ–       | âœ…    |

---

## â­ï¸ ä¸‹ä¸€é˜¶æ®µé¢„å‘Šï¼šç”¨æˆ·æ³¨å†Œ / ç™»å½•ï¼ˆFirebase Authï¼‰

ä¸‹ä¸€é˜¶æ®µä½ å°†å­¦ä¹ ï¼š

1. ä½¿ç”¨ Firebase Authentication åˆ›å»ºç”¨æˆ·æ³¨å†Œä¸ç™»å½•
2. ç™»å‡ºåŠŸèƒ½
3. ç™»å½•åè‡ªåŠ¨è·³è½¬ç¬”è®°åˆ—è¡¨é¡µ

---
é˜¶æ®µ3

ğŸ‰ å¤ªæ£’äº†ï¼æ­å–œä½ å®Œæˆäº† **ç¬¬ 2 é˜¶æ®µï¼šFirebase è¿æ¥æˆåŠŸ âœ…**
ç°åœ¨æˆ‘ä»¬æ­£å¼è¿›å…¥ â€”â€” **ğŸ“ç¬¬ 3 é˜¶æ®µï¼šç”¨æˆ·æ³¨å†Œ / ç™»å½•ï¼ˆFirebase Authï¼‰**ã€‚
è¿™ä¸€é˜¶æ®µéå¸¸å…³é”®ï¼Œå› ä¸ºå®ƒè®©ä½ çš„è®°äº‹æœ¬å˜æˆçœŸæ­£çš„ã€Œå¤šç”¨æˆ·åº”ç”¨ã€ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„ç¬”è®°æ•°æ®ã€‚

---

# ğŸ” ç¬¬ 3 é˜¶æ®µï¼šFirebase ç™»å½• / æ³¨å†Œ åŠŸèƒ½å®ç°

---

## ğŸ¯ é˜¶æ®µç›®æ ‡

âœ… ä½¿ç”¨ Firebase Authentication å®ç°

* ç”¨æˆ·æ³¨å†Œ
* ç”¨æˆ·ç™»å½•
* ç”¨æˆ·ç™»å‡º

âœ… ç™»å½•åè‡ªåŠ¨è·³è½¬åˆ°ç¬”è®°åˆ—è¡¨é¡µ
âœ… åœ¨é¡µé¢ä¸­æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„ç™»å½•çŠ¶æ€

---

## ğŸ§© ç¬¬ 1 æ­¥ï¼šç¡®ä¿å·²å®‰è£… Auth æ¨¡å—

å¦‚æœå‰é¢å®‰è£…è¿‡ä»¥ä¸‹ä¸¤ä¸ªåº“ï¼Œå°±ä¸ç”¨é‡å¤ï¼š

```bash
npm install firebase @angular/fire
```

---

## ğŸ§© ç¬¬ 2 æ­¥ï¼šç¡®è®¤åœ¨ `app.module.ts` å·²å¯¼å…¥ Auth æ¨¡å—

Angular 9 ç”¨æ—§ç‰ˆè¯­æ³•ï¼Œç¡®ä¿ä½ æœ‰ä»¥ä¸‹å†…å®¹ğŸ‘‡ï¼š

```typescript
import { AngularFireAuthModule } from '@angular/fire/auth';

@NgModule({
  imports: [
    // ...çœç•¥
    AngularFireAuthModule,
  ],
})
export class AppModule {}
```

---

## ğŸ§© ç¬¬ 3 æ­¥ï¼šåˆ›å»ºç™»å½•ä¸æ³¨å†Œç»„ä»¶

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
ng generate component pages/login
ng generate component pages/register
```

ç”Ÿæˆåç›®å½•åº”å¦‚ä¸‹ï¼š

```
src/app/pages/
 â”œâ”€â”€ login/
 â”‚    â”œâ”€â”€ login.component.ts
 â”‚    â”œâ”€â”€ login.component.html
 â”‚    â””â”€â”€ login.component.css
 â””â”€â”€ register/
      â”œâ”€â”€ register.component.ts
      â”œâ”€â”€ register.component.html
      â””â”€â”€ register.component.css
```

---

## ğŸ§© ç¬¬ 4 æ­¥ï¼šæ³¨å†Œé€»è¾‘å®ç°

æ‰“å¼€ `register.component.ts`ï¼š

```typescript
import { Component } from '@angular/core';
import { AngularFireAuth } from '@angular/fire/auth';
import { Router } from '@angular/router';

@Component({
  selector: 'app-register',
  templateUrl: './register.component.html'
})
export class RegisterComponent {
  email = '';
  password = '';
  errorMsg = '';

  constructor(private afAuth: AngularFireAuth, private router: Router) {}

  async register() {
    try {
      await this.afAuth.createUserWithEmailAndPassword(this.email, this.password);
      console.log('âœ… Register success!');
      this.router.navigate(['/login']);
    } catch (error: any) {
      this.errorMsg = error.message;
      console.error('âŒ Register failed:', error);
    }
  }
}
```

---

### ğŸ“„ register.component.html

```html
<h2>ç”¨æˆ·æ³¨å†Œ</h2>
<div>
  <label>Email:</label>
  <input type="email" [(ngModel)]="email" placeholder="è¾“å…¥é‚®ç®±">
</div>

<div>
  <label>Password:</label>
  <input type="password" [(ngModel)]="password" placeholder="è¾“å…¥å¯†ç ">
</div>

<button (click)="register()">æ³¨å†Œ</button>

<p *ngIf="errorMsg" style="color:red;">{{ errorMsg }}</p>
```

åˆ«å¿˜äº†åœ¨ `app.module.ts` ä¸­å¼•å…¥ï¼š

```typescript
import { FormsModule } from '@angular/forms';

@NgModule({
  imports: [
    FormsModule,
    // å…¶ä»–...
  ]
})
```

---

## ğŸ§© ç¬¬ 5 æ­¥ï¼šç™»å½•é€»è¾‘å®ç°

æ‰“å¼€ `login.component.ts`ï¼š

```typescript
import { Component } from '@angular/core';
import { AngularFireAuth } from '@angular/fire/auth';
import { Router } from '@angular/router';

@Component({
  selector: 'app-login',
  templateUrl: './login.component.html'
})
export class LoginComponent {
  email = '';
  password = '';
  errorMsg = '';

  constructor(private afAuth: AngularFireAuth, private router: Router) {}

  async login() {
    try {
      await this.afAuth.signInWithEmailAndPassword(this.email, this.password);
      console.log('âœ… Login success!');
      this.router.navigate(['/notes']);
    } catch (error: any) {
      this.errorMsg = error.message;
      console.error('âŒ Login failed:', error);
    }
  }
}
```

---

### ğŸ“„ login.component.html

```html
<h2>ç”¨æˆ·ç™»å½•</h2>
<div>
  <label>Email:</label>
  <input type="email" [(ngModel)]="email" placeholder="è¾“å…¥é‚®ç®±">
</div>

<div>
  <label>Password:</label>
  <input type="password" [(ngModel)]="password" placeholder="è¾“å…¥å¯†ç ">
</div>

<button (click)="login()">ç™»å½•</button>

<p *ngIf="errorMsg" style="color:red;">{{ errorMsg }}</p>
```

---

## ğŸ§© ç¬¬ 6 æ­¥ï¼šç™»å‡ºåŠŸèƒ½

ä½ å¯ä»¥åœ¨ `app.component.ts` æˆ–å¯¼èˆªæ ç»„ä»¶ä¸­åŠ ä¸€ä¸ªç™»å‡ºæŒ‰é’®ï¼š

```typescript
import { AngularFireAuth } from '@angular/fire/auth';

constructor(private afAuth: AngularFireAuth, private router: Router) {}

logout() {
  this.afAuth.signOut();
  this.router.navigate(['/login']);
}
```

HTMLï¼š

```html
<button (click)="logout()">ç™»å‡º</button>
```

---

## ğŸ§© ç¬¬ 7 æ­¥ï¼šè·¯ç”±è·³è½¬è®¾ç½®

ä¿®æ”¹ `app-routing.module.ts`ï¼š

```typescript
const routes: Routes = [
  //åªæœ‰å½“è·¯å¾„ã€Œå®Œå…¨ç­‰äºç©ºå­—ç¬¦ä¸²ã€æ—¶æ‰åŒ¹é…ã€‚
// ä¹Ÿå°±æ˜¯ä»…å½“è®¿é—®æ ¹è·¯å¾„ / çš„æ—¶å€™ã€‚
  { path: '', redirectTo: '/login', pathMatch: 'full' },
  { path: 'login', component: LoginComponent },
  { path: 'register', component: RegisterComponent },
  { path: 'notes', component: NotesListComponent },
];
```

---

## ğŸ§ª æµ‹è¯•æµç¨‹

1. æ‰“å¼€é¡µé¢ â†’ æ³¨å†Œä¸€ä¸ªè´¦å·ï¼ˆé‚®ç®± + å¯†ç ï¼‰
2. æ³¨å†ŒæˆåŠŸå â†’ è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ
3. ç™»å½• â†’ è·³è½¬åˆ° `/notes`
4. æ‰“å¼€ Firebase æ§åˆ¶å° â†’ ã€ŒAuthenticationã€
   âœ… çœ‹åˆ°åˆšæ³¨å†Œçš„ç”¨æˆ·ï¼Œå°±ä»£è¡¨åŠŸèƒ½æˆåŠŸã€‚

---

## âœ… é˜¶æ®µæ€»ç»“

| åŠŸèƒ½               | çŠ¶æ€ |
| :----------------- | :--- |
| Firebase Auth æ¨¡å— | âœ…    |
| æ³¨å†ŒåŠŸèƒ½           | âœ…    |
| ç™»å½•åŠŸèƒ½           | âœ…    |
| ç™»å‡ºåŠŸèƒ½           | âœ…    |
| ç”¨æˆ·è‡ªåŠ¨è·³è½¬       | âœ…    |

---

## â­ï¸ ä¸‹ä¸€é˜¶æ®µé¢„å‘Šï¼šç¬¬ 4 é˜¶æ®µ â€”â€” ç¬”è®° CRUD

ä¸‹ä¸€é˜¶æ®µä½ å°†å­¦ä¹ ï¼š

1. ä½¿ç”¨ Firestore ä¿å­˜æ¯ä¸ªç”¨æˆ·çš„ç¬”è®°
2. åˆ—å‡ºå½“å‰ç”¨æˆ·çš„ç¬”è®°
3. ç¼–è¾‘ / åˆ é™¤ç¬”è®°
4. ä¸ç”¨æˆ·è´¦å·å…³è”ï¼ˆéš”ç¦»ä¸åŒç”¨æˆ·çš„æ•°æ®ï¼‰

---

æ˜¯å¦å¸Œæœ›æˆ‘å¸®ä½ ç”Ÿæˆã€Œç¬¬ 4 é˜¶æ®µï¼šç¬”è®° CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ã€é‚£ä¸€é¡µï¼Ÿ
æˆ‘ä¼šå»¶ç»­ç°åœ¨è¿™ç§æ•™å­¦ç»“æ„ï¼ˆå«å®Œæ•´ç»„ä»¶ + Firestore é›†åˆé€»è¾‘ + åŠ¨æ€ç»‘å®šï¼‰ã€‚




//æ³¨æ„ç‚¹ 
å…³äºç”¨æˆ·ç™»é™† è°ƒç”¨çš„æ˜¯firebaseçš„è‡ªå¸¦ç”¨æˆ·ç™»é™†éªŒè¯
å¿…é¡»åœ¨firebaseçš„åå°æ‰“å¼€AuthenticationåŠŸèƒ½ 
è·Ÿdatabaseå®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªç»„ä»¶
æ‰“å¼€ä¹‹åè®¾ç½®é‡Œé¢æœ‰ä¸ªç™»é™†æ–¹æ³• éœ€è¦ä¿®æ”¹



ç¬¬ 4 é˜¶æ®µ â€”â€” ç¬”è®° CRUD

å¤ªå¥½äº† ğŸ‘ æˆ‘ä»¬æ­£å¼è¿›å…¥

# ğŸ§­ **ç¬¬ 4 é˜¶æ®µï¼šç¬”è®° CRUD å…¨å®ç°ï¼ˆå«ç”¨æˆ·éš”ç¦»ï¼‰**

è¿™é˜¶æ®µä½ å°†äº²æ‰‹å†™å‡ºä¸€ä¸ªå®Œæ•´çš„ **Firebase + Angular** CRUD åº”ç”¨ã€‚
æˆ‘ä¼šä¸€æ­¥æ­¥å¸¦ä½ èµ°ï¼Œä»ç›®å½•ç»“æ„ã€ç»„ä»¶å»ºç«‹ã€è·¯ç”±é…ç½®ï¼Œåˆ° Firestore è¯»å†™é€»è¾‘ã€‚
æˆ‘ä»¬å…ˆå‡è®¾ä½ å·²å®Œæˆå‰é¢é˜¶æ®µï¼šâœ… Firebase å·²è¿æ¥ã€âœ… Auth ç™»å½•åŠŸèƒ½å¯ç”¨ã€‚

---

## ğŸ”§ ä¸€ã€é˜¶æ®µç›®æ ‡æ¦‚è§ˆ

| åŠŸèƒ½      | è¯´æ˜                         |
| :------ | :------------------------- |
| ğŸ†• æ–°å¢ç¬”è®° | ç”¨æˆ·å¡«å†™æ ‡é¢˜ã€å†…å®¹ â†’ ä¿å­˜åˆ° Firestore  |
| ğŸ“– åˆ—å‡ºç¬”è®° | ä»…æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„ç¬”è®°               |
| âœï¸ ç¼–è¾‘ç¬”è®° | ç‚¹å‡»ç¬”è®° â†’ ä¿®æ”¹å†…å®¹å¹¶ä¿å­˜             |
| âŒ åˆ é™¤ç¬”è®°  | ç‚¹å‡»æŒ‰é’®å³å¯åˆ é™¤è¯¥æ¡è®°å½•               |
| ğŸ‘¤ ç”¨æˆ·éš”ç¦» | æ¯ä¸ªç”¨æˆ·ä»…èƒ½çœ‹åˆ°è‡ªå·±çš„ç¬”è®°ï¼ˆé€šè¿‡ `uid` è¿‡æ»¤ï¼‰ |

---

## ğŸ“ äºŒã€é¡¹ç›®ç»“æ„è§„åˆ’

åœ¨ä½ çš„ Angular é¡¹ç›®ä¸‹ï¼ˆ`src/app/pages` æˆ– `src/app`ï¼‰æ–°å¢ä»¥ä¸‹ç›®å½•ï¼š

```
src/
â””â”€â”€ app/
    â”œâ”€â”€ pages/
    â”‚   â”œâ”€â”€ notes-list/
    â”‚   â”‚   â”œâ”€â”€ notes-list.component.ts
    â”‚   â”‚   â”œâ”€â”€ notes-list.component.html
    â”‚   â”‚   â””â”€â”€ notes-list.component.css
    â”‚   â”œâ”€â”€ note-form/
    â”‚   â”‚   â”œâ”€â”€ note-form.component.ts
    â”‚   â”‚   â”œâ”€â”€ note-form.component.html
    â”‚   â”‚   â””â”€â”€ note-form.component.css
    â”‚   â””â”€â”€ note-detail/  (å¯é€‰)
    â”œâ”€â”€ services/
    â”‚   â””â”€â”€ note.service.ts
    â””â”€â”€ app-routing.module.ts
```

---

## ğŸ§© ä¸‰ã€ç»„ä»¶ä¸æœåŠ¡åˆ›å»ºå‘½ä»¤

åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºç»„ä»¶å’ŒæœåŠ¡ï¼š

```bash
ng g c pages/notes-list
ng g c pages/note-form
ng g s services/note
```

---

## ğŸ—ºï¸ å››ã€è·¯ç”±é…ç½®ï¼ˆ`app-routing.module.ts`ï¼‰

å°†æ–°å»ºçš„ä¸¤ä¸ªé¡µé¢æ³¨å†Œåˆ°è·¯ç”±ä¸­ï¼š

```ts
  //ç™»é™†æ¨¡å—
  { path: '', redirectTo: '/login', pathMatch: 'full' },
  { path: 'login', component: LoginComponent },
  { path: 'register', component: RegisterComponent },
  //ç¬”è®°æ¨¡å—
  { path: 'notes', component: NotesListComponent, canActivate: [AuthGuard] /*, canActivate: [AuthGuard]*/ },
  { path: 'notes/new', component: NoteFormComponent, canActivate: [AuthGuard] },
  { path: 'notes/edit/:id', component: NoteFormComponent, canActivate: [AuthGuard] },
  { path: '**', redirectTo: '' }

```

---

## ğŸ§  äº”ã€æœåŠ¡é€»è¾‘ï¼ˆ`note.service.ts`ï¼‰

æˆ‘ä»¬ç»Ÿä¸€ç”¨ä¸€ä¸ªæœåŠ¡æ¥æ“ä½œ Firestoreã€‚

```ts
import { Injectable } from '@angular/core';
import { AngularFirestore } from '@angular/fire/compat/firestore';
import { AngularFireAuth } from '@angular/fire/compat/auth';
import { map } from 'rxjs/operators';
import { Note } from '../models/note.model';



@Injectable({ providedIn: 'root' })
export class NoteService {
  constructor(private afs: AngularFirestore, private afAuth: AngularFireAuth) {}

  getUserNotes() {
    return this.afAuth.user.pipe(
      map(user => user?.uid),
      // å–å½“å‰ç”¨æˆ·çš„ uid è¿‡æ»¤ç¬”è®°
      switchMap(uid => this.afs.collection<Note>('notes', ref => ref.where('uid', '==', uid))
        .valueChanges({ idField: 'id' }))
    );
  }

  addNote(note: Partial<Note>) {
    return this.afAuth.user.pipe(
      take(1),
      map(user => user?.uid),
      tap(uid => {
        if (!uid) throw new Error('No user logged in');
        this.afs.collection('notes').add({
          uid,
          title: note.title,
          content: note.content,
          createdAt: new Date()
        });
      })
    );
  }

//   async addNote(note: Partial<Note>) {
//   const user = await firstValueFrom(this.afAuth.user.pipe(take(1)));
//   if (!user) throw new Error('No user logged in');

//   return this.afs.collection('notes').add({
//     uid: user.uid,
//     title: note.title,
//     content: note.content,
//     createdAt: new Date()
//   });
// }


  

  updateNote(id: string, data: Partial<Note>) {
    return this.afs.doc(`notes/${id}`).update({
      ...data,
      updatedAt: new Date()
    });
  }

  deleteNote(id: string) {
    return this.afs.doc(`notes/${id}`).delete();
  }

  getNoteById(id: string) {
    return this.afs.doc<Note>(`notes/${id}`).valueChanges({ idField: 'id' });
  }
}
```

> ğŸ” ç”¨æ³•ï¼š
> `this.noteService.getUserNotes()` â†’ è®¢é˜…å³å¯è·å–ç”¨æˆ·ç¬”è®°
> `this.noteService.addNote()` â†’ æ–°å¢
> `updateNote()` / `deleteNote()` åŒç†

---

## ğŸ§¾ å…­ã€ç¬”è®°åˆ—è¡¨é¡µé¢ï¼ˆ`notes-list.component.ts`ï¼‰

```ts
import { Component, OnInit } from '@angular/core';
import { NoteService, Note } from '../../services/note.service';
import { Router } from '@angular/router';

@Component({
  selector: 'app-notes-list',
  templateUrl: './notes-list.component.html',
})
export class NotesListComponent implements OnInit {
  notes: Note[] = [];

  constructor(private noteService: NoteService, private router: Router) {}

  ngOnInit() {
    this.noteService.getUserNotes().subscribe(notes => this.notes = notes);
  }

  addNote() {
    this.router.navigate(['/note/new']);
  }

  editNote(id: string) {
    this.router.navigate(['/note/edit', id]);
  }

  deleteNote(id: string) {
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡ç¬”è®°å—ï¼Ÿ')) {
      this.noteService.deleteNote(id);
    }
  }
}
```

---

### HTMLï¼š`notes-list.component.html`

```html
<div class="container mt-4">
  <h2>ğŸ“˜ æˆ‘çš„ç¬”è®°</h2>

  <button class="btn btn-primary mb-3" (click)="addNote()">+ æ–°å¢ç¬”è®°</button>

  <div *ngIf="notes.length === 0">è¿˜æ²¡æœ‰ä»»ä½•ç¬”è®°ã€‚</div>

  <ul class="list-group">
    <li *ngFor="let note of notes" class="list-group-item">
      <h5>{{ note.title }}</h5>
      <p>{{ note.content }}</p>
      <small>{{ note.createdAt.toDate() | date: 'yyyy/MM/dd HH:mm' }}</small>
      <div class="mt-2">
        <button class="btn btn-sm btn-outline-secondary" (click)="editNote(note.id!)">ç¼–è¾‘</button>
        <button class="btn btn-sm btn-outline-danger" (click)="deleteNote(note.id!)">åˆ é™¤</button>
      </div>
    </li>
  </ul>
</div>
```

---

## âœï¸ ä¸ƒã€æ–°å¢/ç¼–è¾‘é¡µï¼ˆ`note-form.component.ts`ï¼‰

```ts
import { Component, OnInit } from '@angular/core';
import { NoteService } from '../../services/note.service';
import { ActivatedRoute, Router } from '@angular/router';

@Component({
  selector: 'app-note-form',
  templateUrl: './note-form.component.html',
})
export class NoteFormComponent implements OnInit {
  noteId: string | null = null;
  title = '';
  content = '';

  constructor(
    private noteService: NoteService,
    private route: ActivatedRoute,
    private router: Router
  ) {}

  ngOnInit() {
    this.noteId = this.route.snapshot.paramMap.get('id');
    if (this.noteId) {
      this.noteService.getNoteById(this.noteId).subscribe(note => {
        if (note) {
          this.title = note.title;
          this.content = note.content;
        }
      });
    }
  }

  saveNote() {
    if (this.noteId) {
      this.noteService.updateNote(this.noteId, {
        title: this.title,
        content: this.content
      }).then(() => this.router.navigate(['/notes']));
    } else {
      this.noteService.addNote({ title: this.title, content: this.content })
        .subscribe(() => this.router.navigate(['/notes']));
    }
  }
}
```

---

### HTMLï¼š`note-form.component.html`

```html
<div class="container mt-4">
  <h2>{{ noteId ? 'âœï¸ ç¼–è¾‘ç¬”è®°' : 'ğŸ†• æ–°å»ºç¬”è®°' }}</h2>

  <form (ngSubmit)="saveNote()">
    <div class="mb-3">
      <label>æ ‡é¢˜ï¼š</label>
      <input type="text" class="form-control" [(ngModel)]="title" name="title" required>
    </div>

    <div class="mb-3">
      <label>å†…å®¹ï¼š</label>
      <textarea class="form-control" rows="5" [(ngModel)]="content" name="content"></textarea>
    </div>

    <button type="submit" class="btn btn-success">ä¿å­˜</button>
    <button type="button" class="btn btn-secondary ms-2" (click)="router.navigate(['/notes'])">è¿”å›</button>
  </form>
</div>
```

---

## ğŸ§© å…«ã€è¿è¡Œæµ‹è¯•

```bash
ng serve
```

ç™»å½•åè®¿é—®ï¼š

```
http://localhost:4200/notes
```

âœ… å¯ä»¥æŸ¥çœ‹ã€æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ç¬”è®°
âœ… æ•°æ®è‡ªåŠ¨ä¸å½“å‰ç”¨æˆ·ç»‘å®š

---

## ğŸŒˆ ä¹ã€ä¸‹ä¸€æ­¥æ‰©å±•ï¼ˆå¯é€‰ï¼‰

| æ–¹å‘        | å†…å®¹                                |
| :-------- | :-------------------------------- |
| â­ æ’åºåŠŸèƒ½    | æŒ‰åˆ›å»ºæ—¶é—´æˆ–æ ‡é¢˜æ’åº                        |
| ğŸ•“ æ›´æ–°æ—¶é—´æ˜¾ç¤º | å¢åŠ  `updatedAt` å­—æ®µ                 |
| ğŸ” æœç´¢     | æ”¯æŒæ ‡é¢˜å…³é”®å­—æœç´¢                         |
| ğŸ§­ ç¬”è®°è¯¦æƒ…é¡µ  | å¯å•ç‹¬æ‰“å¼€ç¬”è®°å†…å®¹                         |
| ğŸ’„ æ ·å¼ç¾åŒ–   | ä½¿ç”¨ Bootstrap å¡ç‰‡æˆ– Angular Material |

---

æ˜¯å¦å¸Œæœ›æˆ‘ä¸‹ä¸€æ­¥å¸®ä½ ï¼š

> ğŸ’¡ã€ŒæŠŠ Firestore å®‰å…¨è§„åˆ™ã€å†™å‡ºæ¥ï¼ˆåªå…è®¸ç”¨æˆ·è¯»å†™è‡ªå·±çš„ç¬”è®°ï¼‰
> è¿˜æ˜¯å…ˆç»§ç»­åšå‰ç«¯é¡µé¢çš„ CRUD æµ‹è¯•ï¼Ÿ

