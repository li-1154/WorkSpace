<div class="product-card" *ngFor="let item of products" [ngClass]="{ 'out-of-stock': item.stock === 0 }"
    (click)="toggleSelect(item.code)">


    <div class="row">

        <!-- å·¦ä¾§å›¾ç‰‡ + ç¼–å· -->
        <div class="left">
            <img *ngIf="item.imageUrl; else noImg" [src]="item.imageUrl" class="thumb" />
            <ng-template #noImg>
                <div class="thumb no-img">æ— å›¾</div>
            </ng-template>

            <span class="code">{{ item.code }}</span>
            <span class="stock-tag" [ngClass]="getColor(item.stock)">{{ item.stock || 0 }} ä»¶</span>
        </div>

        <!-- ä¸­é—´ä¿¡æ¯ -->
        <div class="right-info">

            <div class="info-row">
                <span>åç§°ï¼š</span><strong>{{ item.name }}</strong>
            </div>

            <div class="info-row">
                <span>JANï¼š</span>{{ item.janId }}
            </div>

            <!-- åˆ†ç±» + é¢œè‰² åŒä¸€è¡Œ -->
            <div class="info-row double">
                <div><span>åˆ†ç±»ï¼š</span>{{ item.categoryName }}</div>
                <div><span>é¢œè‰²ï¼š</span>{{ item.colorName }}</div>
            </div>

            <!-- è¿›è´§ä»· + å‡ºè´§ä»· åŒè¡Œ -->
            <div class="info-row double">
                <div><span>è¿›è´§ä»·ï¼š</span>Â¥{{ item.costPrice }}</div>
                <div><span>å‡ºè´§ä»·ï¼š</span>Â¥{{ item.salePrice }}</div>
            </div>

        </div>


        <!-- å³ä¾§æŒ‰é’®ï¼šåªæœ‰é€‰æ‹©æ—¶æ˜¾ç¤º -->
        <div class="actions" *ngIf="selectedItemId === item.code">
            <button class="btn-in" (click)="openStockModal(item, 'in')">â• å…¥åº“</button>
            <button class="btn-out" (click)="openStockModal(item, 'out')">â– å‡ºåº“</button>
            <button class="btn-edit" (click)="editStock(item.code); $event.stopPropagation()">âš™ è°ƒæ•´</button>
            <button class="btn-view" (click)="viewHistory(item.code); $event.stopPropagation()">ğŸ“„ è®°å½•</button>
        </div>

    </div>

</div>